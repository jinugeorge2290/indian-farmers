name: indian-farmers
prefect-version: 3.4.24

build: null
push: null

pull:
  - prefect.deployments.steps.git_clone:
      id: clone_repo
      repository: https://github.com/suraj821/indian-farmers.git
      branch: master

  - prefect.deployments.steps.set_working_directory:
      directory: "{{ clone_repo.directory }}"

  - prefect.deployments.steps.pip_install_requirements:
      requirements_file: requirements.txt

deployments:
  - name: master_pipeline
    entrypoint: master_pipeline.py:master_pipeline_flow
    work_pool:
      name: farmers-dataml-pipeline
      job_variables:
        PREFECT_DOCKER_IMAGE: "public.ecr.aws/prefecthq/prefect:3-latest"
        PREFECT_JOB_MEMORY: 4096
    schedules:
      - interval: 3600.0
        active: true
